<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Graph (landmarks.Landmark__.Graph)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">landmarks</a> &#x00BB; <a href="../index.html">Landmark__</a> &#x00BB; Graph</nav><h1>Module <code>Landmark__.Graph</code></h1></header><aside><p>All about exporting profiling results</p></aside><aside><p>A <i>callgraph</i> is a tree where each <a href="index.html#type-node"><code>node</code></a> is an instance of a <a href="../../Landmark/index.html#type-landmark"><code>Landmark.landmark</code></a> representing the entering and exiting of instrumented code in the execution path.</p></aside><dl><dt class="spec type" id="type-id"><a href="#type-id" class="anchor"></a><code><span class="keyword">type </span>id</code><code><span class="keyword"> = </span>int</code></dt><dd><p>Identifies nodes</p></dd></dl><dl><dt class="spec type" id="type-kind"><a href="#type-kind" class="anchor"></a><code><span class="keyword">type </span>kind</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-kind.Normal" class="anchored"><td class="def constructor"><a href="#type-kind.Normal" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Normal</span></code></td><td class="doc"><p>Usual landmarks</p></td></tr><tr id="type-kind.Root" class="anchored"><td class="def constructor"><a href="#type-kind.Root" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Root</span></code></td><td class="doc"><p>The special node that started with the profiling.</p></td></tr><tr id="type-kind.Counter" class="anchored"><td class="def constructor"><a href="#type-kind.Counter" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Counter</span></code></td><td class="doc"><p>Counters (see <a href="../../Landmark/index.html#type-counter"><code>Landmark.counter</code></a>)</p></td></tr><tr id="type-kind.Sampler" class="anchored"><td class="def constructor"><a href="#type-kind.Sampler" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Sampler</span></code></td><td class="doc"><p>Samplers (set <a href="../../Landmark/index.html#type-sampler"><code>Landmark.sampler</code></a>)</p></td></tr></table></dt><dd><p>The kind of node.</p></dd></dl><dl><dt class="spec type" id="type-node"><a href="#type-node" class="anchor"></a><code><span class="keyword">type </span>node</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-node.id" class="anchored"><td class="def field"><a href="#type-node.id" class="anchor"></a><code>id : <a href="index.html#type-id">id</a>;</code></td><td class="doc"><p>Unique identifier.</p></td></tr><tr id="type-node.kind" class="anchored"><td class="def field"><a href="#type-node.kind" class="anchor"></a><code>kind : <a href="index.html#type-kind">kind</a>;</code></td></tr><tr id="type-node.landmark_id" class="anchored"><td class="def field"><a href="#type-node.landmark_id" class="anchor"></a><code>landmark_id : int;</code></td><td class="doc"><p>The node is an instance of this landmark.</p></td></tr><tr id="type-node.name" class="anchored"><td class="def field"><a href="#type-node.name" class="anchor"></a><code>name : string;</code></td><td class="doc"><p>Name of the landmark (see <a href="../../Landmark/index.html#val-register"><code>Landmark.register</code></a>).</p></td></tr><tr id="type-node.location" class="anchored"><td class="def field"><a href="#type-node.location" class="anchor"></a><code>location : string;</code></td><td class="doc"><p>Location of the landmark (see <a href="../../Landmark/index.html#val-register"><code>Landmark.register</code></a>).</p></td></tr><tr id="type-node.calls" class="anchored"><td class="def field"><a href="#type-node.calls" class="anchor"></a><code>calls : int;</code></td><td class="doc"><p>Number of time this node was entered.</p></td></tr><tr id="type-node.time" class="anchored"><td class="def field"><a href="#type-node.time" class="anchor"></a><code>time : float;</code></td><td class="doc"><p>Time (in cycles) spent between enter and exit.</p></td></tr><tr id="type-node.sons" class="anchored"><td class="def field"><a href="#type-node.sons" class="anchor"></a><code>sons : <a href="index.html#type-id">id</a> list;</code></td><td class="doc"><p>The list of instances of landmarks that was entered while the node was opened.</p></td></tr><tr id="type-node.sys_time" class="anchored"><td class="def field"><a href="#type-node.sys_time" class="anchor"></a><code>sys_time : float;</code></td><td class="doc"><p>Time (using Sys.time) spent between enter and exit.</p></td></tr><tr id="type-node.allocated_bytes" class="anchored"><td class="def field"><a href="#type-node.allocated_bytes" class="anchor"></a><code>allocated_bytes : float;</code></td><td class="doc"><p>Gc.allocated_bytes between enter and exit.</p></td></tr><tr id="type-node.distrib" class="anchored"><td class="def field"><a href="#type-node.distrib" class="anchor"></a><code>distrib : float array;</code></td><td class="doc"><p>For samplers only. The list of collected samples.</p></td></tr></table><code>}</code></dt><dd><p>The type exported view of a node.</p></dd></dl><section><header><h3 id="callgraph"><a href="#callgraph" class="anchor"></a>Callgraph</h3></header><dl><dt class="spec type" id="type-graph"><a href="#type-graph" class="anchor"></a><code><span class="keyword">type </span>graph</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-graph.nodes" class="anchored"><td class="def field"><a href="#type-graph.nodes" class="anchor"></a><code>nodes : <a href="index.html#type-node">node</a> array;</code></td></tr><tr id="type-graph.label" class="anchored"><td class="def field"><a href="#type-graph.label" class="anchor"></a><code>label : string;</code></td></tr></table><code>}</code></dt><dd><p>The type of callgraphs.</p></dd></dl><dl><dt class="spec value" id="val-nodes"><a href="#val-nodes" class="anchor"></a><code><span class="keyword">val </span>nodes : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> list</code></dt><dd><p>Returns all nodes of a graph.</p></dd></dl><dl><dt class="spec value" id="val-root"><a href="#val-root" class="anchor"></a><code><span class="keyword">val </span>root : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dd><p>Returns the root of a graph.</p></dd></dl><dl><dt class="spec value" id="val-sons"><a href="#val-sons" class="anchor"></a><code><span class="keyword">val </span>sons : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> list</code></dt><dd><p>Returns the sons of node (<code>sons graph node</code> is equivalent to <code>List.map (node_of_id graph) node.sons</code>)</p></dd></dl><dl><dt class="spec value" id="val-label"><a href="#val-label" class="anchor"></a><code><span class="keyword">val </span>label : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Returns a fully qualified name if it is needed.</p></dd></dl><dl><dt class="spec value" id="val-graph_of_nodes"><a href="#val-graph_of_nodes" class="anchor"></a><code><span class="keyword">val </span>graph_of_nodes : ?&#8288;label:string <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> list <span>&#45;&gt;</span> <a href="index.html#type-graph">graph</a></code></dt><dd><p>Builds a graph from a list of nodes.</p></dd></dl></section><section><header><h3 id="traversal"><a href="#traversal" class="anchor"></a>Traversal</h3></header><dl><dt class="spec value" id="val-path_dfs"><a href="#val-path_dfs" class="anchor"></a><code><span class="keyword">val </span>path_dfs : (bool <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> list <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> (<a href="index.html#type-node">node</a> list <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>path_dfs f g graph</code> traverses the graph in the depth-first fashion starting from the root. At each step we call <code>f visited path v</code> or <code>g path v</code> where <code>v</code> is the visited node and <code>path</code> is the path from the root that led us to that node. The function <code>g</code> is called when the visited node <code>v</code> belongs to <code>path</code>; it indicates a loop (and the traversal does not continue with the sons of g). The function <code>f</code> is called when <code>v</code> does not belong to <code>path</code>. The flag <code>visited</code> is true when the vertex has already been visited.</p></dd></dl><dl><dt class="spec value" id="val-dfs"><a href="#val-dfs" class="anchor"></a><code><span class="keyword">val </span>dfs : (<a href="index.html#type-node">node</a> list <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<a href="index.html#type-node">node</a> list <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>A specialization of <code>path_dfs</code> that does not need to read the visited flag. The returned values of the first function tells whether or not the traversal should continue visiting the children of the current node.</p></dd></dl></section><section><header><h3 id="utility-functions"><a href="#utility-functions" class="anchor"></a>Utility functions</h3></header><dl><dt class="spec value" id="val-depth"><a href="#val-depth" class="anchor"></a><code><span class="keyword">val </span>depth : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the depth to the root of the node (it is better to partially apply the function, if you need to call multiple times on the same graph).</p></dd></dl><dl><dt class="spec value" id="val-shallow_ancestor"><a href="#val-shallow_ancestor" class="anchor"></a><code><span class="keyword">val </span>shallow_ancestor : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dd><p>Returns the oldest ancestor of a node that is not the root (if it exists) or the root if it does not exist.</p></dd></dl><dl><dt class="spec value" id="val-intensity"><a href="#val-intensity" class="anchor"></a><code><span class="keyword">val </span>intensity : ?&#8288;proj:(<a href="index.html#type-node">node</a> <span>&#45;&gt;</span> float) <span>&#45;&gt;</span> <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-node">node</a> <span>&#45;&gt;</span> float</code></dt><dd><p>Returns an arbitrary number between 0.0 and 1.0.</p></dd></dl><dl><dt class="spec value" id="val-total_number_of_calls"><a href="#val-total_number_of_calls" class="anchor"></a><code><span class="keyword">val </span>total_number_of_calls : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Computes the sum of all calls field.</p></dd></dl></section><section><header><h3 id="simplification-/-merge-/-quotienting."><a href="#simplification-/-merge-/-quotienting." class="anchor"></a>Simplification / Merge / Quotienting.</h3></header><dl><dt class="spec value" id="val-aggregate_landmarks"><a href="#val-aggregate_landmarks" class="anchor"></a><code><span class="keyword">val </span>aggregate_landmarks : <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> <a href="index.html#type-graph">graph</a></code></dt><dd><p><code>aggregate_landmarks g</code> computes the quotient by the relation &quot;being an instance of the same landmark&quot;.</p></dd></dl></section><section><header><h3 id="output"><a href="#output" class="anchor"></a>Output</h3></header><dl><dt class="spec value" id="val-output"><a href="#val-output" class="anchor"></a><code><span class="keyword">val </span>output : ?&#8288;threshold:float <span>&#45;&gt;</span> Stdlib.out_channel <span>&#45;&gt;</span> <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty printed output a call graph on an out_channel.</p></dd></dl><dl><dt class="spec value" id="val-output_json"><a href="#val-output_json" class="anchor"></a><code><span class="keyword">val </span>output_json : Stdlib.out_channel <span>&#45;&gt;</span> <a href="index.html#type-graph">graph</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Outputs a JSON representation of a call graph on an out_channel.</p></dd></dl></section></div></body></html>